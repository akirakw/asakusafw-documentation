==============================
運用環境マイグレーションガイド
==============================

この文書では、Asakusa Framework のバージョンアップに伴う、運用環境のマイグレーション手順について解説します。

バージョン共通のマイグレーション手順
====================================

ここでは、各バージョン共通のマイグレーション手順について説明します。

..  attention::
    ここで説明する手順に加えて、マイグレーション先のバージョンや現在利用している環境によっては、後述する `バージョン固有のマイグレーション手順`_ が必要となる場合があるので必ずその内容も確認してください。

デプロイメントアーカイブの再配置
--------------------------------

運用環境のマイグレーションを行う場合、アプリケーションプロジェクトに対してマイグレーション対象バージョンでビルドしてデプロイメントアーカイブを再作成して、運用環境にデプロイメントアーカイブを再配置します。

運用環境のデプロイについては、以下のドキュメントを参照してください。

* :doc:`deployment-guide`

..  attention::
    Asakusa Frameworkのマイグレーションを行う際には、基本的にマイグレーション対象のバージョンでコンパイルを行ったバッチアプリケーションをデプロイする必要があります。

    マイグレーション元となるバージョンでビルドしたバッチアプリケーションをマイグレーション先の環境にデプロイしないよう注意してください。

..  hint::
    各コンポーネントで利用する運用環境向けの設定ファイルについては、アプリケーションプロジェクトのビルド設定やプロファイルを利用して管理することを推奨します。

    デプロイメントの構成については、 :doc:`deployment-guide` や :doc:`../application/gradle-plugin` を参照してください。

バージョン固有のマイグレーション手順
====================================

バージョン 0.9.0 へのマイグレーション
-------------------------------------

Java (JDK)
~~~~~~~~~~

Java7、およびJDK 7は非対応になりました。

Java7、およびJDK 7を利用している場合、Java8 (JDK 8)に移行する必要があります。

運用環境で利用可能なJavaのバージョンや移行方法については、利用しているHadoopディストリビューションのドキュメントなどを参照してください。

Spark
~~~~~

Spark 1.6 以前のバージョンは非対応になりました。

Spark 1.6、およびそれ以前のバージョンを利用している場合、Spark 2.0 以降のバージョンに移行する必要があります。

Spark 2.0 への移行については、Sparkのドキュメント、または利用しているHadoopディストリビューションのドキュメントなどを参照してください。

バージョン 0.8.0 へのマイグレーション
-------------------------------------

Java (JDK)
~~~~~~~~~~

Java6、およびJDK 6は非対応になりました。

Java6、およびJDK 6を利用している場合、Java 7(JDK 7)、またはJava8 (JDK 8)に移行する必要があります。

運用環境で利用可能なJavaのバージョンや移行方法については、利用しているHadoopディストリビューションのドキュメントなどを参照してください。

Hadoop
~~~~~~

Hadoop1系は非対応となりました。

運用環境でHadoop1系を利用している場合、Hadoop2系に移行してください。

Hadoop2系への移行については、利用しているHadoopディストリビューションのドキュメントなどを参照してください。
